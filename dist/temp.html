<!DOCTYPE html>
<html lang="en">
	<head>
		<meta charset="UTF-8" />
		<meta name="viewport" content="width=device-width, initial-scale=1.0" />
		<meta http-equiv="X-UA-Compatible" content="ie=edge" />
		<title>Document</title>
		<link rel="stylesheet" href="style.css" />
	</head>
	<body>
		<p class="text-6xl text">1</p>
		<div class="w-screen h-24 overflow-hidden mt-24">
			<div style="width:800px; margin-left: -400px;" class="temp bg-gray-900 h-24"></div>
		</div>

		<script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.1.1/gsap.min.js"></script>
		<script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.1.1/ScrollToPlugin.min.js"></script>

		<script>
			var a = document.querySelector(".text");
			document.addEventListener("touchmove", (e) => {
				a.innerHTML = e.touches[0].clientX + "\t" + e.touches[0].clientY;
				console.log(e.touches[0].clientX, e.touches[0].clientY);
			});

			var current_touch_pos_x = 0;
			var current_touch_pos_y = 0;
			var offset_distance = window.innerWidth / 2;
			var max_distance = 800;
			var normal_touch_pos_x = current_touch_pos_x - offset_distance;

			document.addEventListener("touchmove", (e) => {
				current_touch_pos_x = e.touches[0].clientX;
				current_touch_pos_y = e.touches[0].clientY;
			});

			var convert_range = (current_position) => {
				return ((current_position - -offset_distance) / (offset_distance - -offset_distance)) * (max_distance - -max_distance) + -max_distance;
			};

			function render() {
				normal_touch_pos_x = current_touch_pos_x - offset_distance;
				gsap.to(".temp", 2, {
					x: convert_range(normal_touch_pos_x),
					ease: "power4.out",
				});
				requestAnimationFrame(render);
			}

			requestAnimationFrame(render);
		</script>
	</body>
</html>
